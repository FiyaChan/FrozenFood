<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Products | Admin</title>
  <link rel="stylesheet" href="style_admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <style>
	  * {
		  margin: 0;
		  padding: 0;
		  box-sizing: border-box;
		  font-family: 'Poppins', sans-serif;
		}

		body {
		  background: #FFF4F9;
		  color: #333;
		}

		/* NAVBAR */
		.admin-nav {
		  background: #FF8EC7;
		  padding: 15px 30px;
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		}

		.admin-nav ul {
		  list-style: none;
		  display: flex;
		  gap: 20px;
		}

		.admin-nav ul li a {
		  text-decoration: none;
		  color: black;
		  font-weight: 500;
		  transition: 0.3s;
		}

		.admin-nav ul li a.active,
		.admin-nav ul li a:hover {
		  color: white;
		}

		/* DASHBOARD SECTION */
		.dashboard {
		  padding: 60px 20px;
		  text-align: center;
		}

		.dashboard h1 {
		  font-size: 30px;
		  margin-bottom: 30px;
		  color: #222;
		}

		.cards {
		  display: flex;
		  justify-content: center;
		  flex-wrap: wrap;
		  gap: 30px;
		}

		.card {
		  background: white;
		  width: 220px;
		  padding: 25px;
		  border-radius: 10px;
		  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
		  text-align: center;
		  transition: 0.3s;
		}

		.card i {
		  font-size: 40px;
		  color: #FF8EC7;
		  margin-bottom: 10px;
		}

		.card h3 {
		  margin: 10px 0;
		}

		.card a {
		  display: inline-block;
		  margin-top: 10px;
		  background: #FF8EC7;
		  color: white;
		  text-decoration: none;
		  padding: 8px 15px;
		  border-radius: 5px;
		  font-size: 14px;
		}

		.card:hover {
		  transform: translateY(-5px);
		}

		footer {
		  text-align: center;
		  background: #FFC2E0;
		  color: #000;
		  padding: 15px;
		  flex-shrink: 0;
		}

    table {
      margin: auto;
      background: white;
      border-collapse: collapse;
      width: 70%;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
    }
    th { background-color: #FF8EC7; color: white; }
    button {
      padding: 6px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .delete-btn { background: #ff4d4d; color: white; }
    .add-btn {
      background: #FF8EC7;
      color: white;
      margin-bottom: 20px;
      padding: 8px 16px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <nav class="admin-nav">
    <div class="logo"><img src="image/Logo1.png" width="150"></div>
    <ul>
      <li><a href="adminHome.html"><i class="fas fa-home"></i> Dashboard</a></li>
      <li><a href="manageProducts.html" class="active"><i class="fas fa-box"></i> Products</a></li>
      <li><a href="manageOrders.html"><i class="fas fa-shopping-cart"></i> Orders</a></li>
      <li><a href="manageUsers.html"><i class="fas fa-users"></i> Users</a></li>
      <li><a href="reports.html"><i class="fas fa-chart-bar"></i> Reports</a></li>
      <li><a href="logout.php"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
  </nav>

  <section class="dashboard">
    <h1>Manage Products</h1>
    <a href="addProduct.html" class="add-btn">+ Add Product</a>

    <table id="productTable">
      <thead>
        <tr>
          <th>ID</th><th>Product Name</th><th>Price (RM)</th><th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data dari fetchProducts.php akan dimasukkan di sini -->
      </tbody>
    </table>
  </section>

  <footer class="footer">
    <p>Â© 2025 FrozenFood Admin Panel</p>
  </footer>

  <script>
    // Papar data produk dari PHP (fetchProducts.php)
    fetch("fetchProducts.php")
      .then(response => response.json())
      .then(data => {
        const tableBody = document.querySelector("#productTable tbody");
        tableBody.innerHTML = "";

        data.forEach(product => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${product.product_id}</td>
            <td>${product.name}</td>
            <td>${parseFloat(product.price).toFixed(2)}</td>
            <td>
              <button class="delete-btn" onclick="deleteProduct(${product.product_id})">Delete</button>
            </td>
          `;
          tableBody.appendChild(row);
        });
      });

    // Delete product
    function deleteProduct(id) {
      if (confirm("Are you sure you want to delete this product?")) {
        fetch("deleteProduct.php", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: "id=" + id
        })
        .then(() => location.reload());
      }
    }
  </script>
</body>
</html>
